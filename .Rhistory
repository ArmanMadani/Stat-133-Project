qplot(x = years, y = X3PA, data = data, geom = c("point", "line"), ylab = "Champions’ 3 Pt. FGA")
library(ggplot2)
data <- read.csv(file = "data/champdata.csv", header = TRUE)[-c(1)]
data$X3PP <- data$X3PP * 100
setwd("~/Documents/CS/stat133/Stat-133-Project")
library(ggplot2)
data <- read.csv(file = "data/champdata.csv", header = TRUE)[-c(1)]
data$X3PP <- data$X3PP * 100
qplot(x = years, y = X3PA, data = data, geom = c("point", "line"), ylab = "Champions’ 3 Pt. FGA")
qplot(x = years, y = X3PP, data = data, geom = c("point", "line"), ylim = c(20, 50), ylab = "Champions’ 3 % Pt. FGA")
?setwd
download.file(url_champion_stats, paste0('rawdata/champion_stats', 2000, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/HOU/1995.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 1995, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/CHI/1996.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 1996, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/CHI/1997.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 1997, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/CHI/1998.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 1998, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/SAS/1999.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 1999, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/LAL/2000.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2000, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/LAL/2001.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2001, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/LAL/2002.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2002, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/SAS/2003.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2003, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/DET/2004.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2004, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/SAS/2005.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2005, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/MIA/2006.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2006, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/SAS/2007.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2007, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/BOS/2008.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2008, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/LAL/2009.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2009, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/LAL/2010.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2010, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/DAL/2011.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2011, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/MIA/2012.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2012, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/MIA/2013.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2013, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/SAS/2014.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2014, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/GSW/2015.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2015, '.html'))
champ <- readHTMLTable('rawdata/champion_stats1995.html')
library(XML)
champ <- readHTMLTable('rawdata/champion_stats1995.html')
champ
champ <- as.data.frame(champ[[1]])
champ
View(champ)
champ <- champ[c("Player", "Pos", "Ht", "Wt")]
champ["year"] = 1995
champ <- readHTMLTable('rawdata/champion_stats1995.html')
champ <- as.data.frame(champ[[1]])
champ["Year"] = 1995
champ <- champ[c("Player", "Pos", "Ht", "Wt")]
champ <- readHTMLTable('rawdata/champion_stats1995.html')
champ <- as.data.frame(champ[[1]])
champ["Year"] = 1995
champ <- champ[c("Player", "Pos", "Ht", "Wt")]
champ <- readHTMLTable('rawdata/champion_stats1995.html')
champ <- as.data.frame(champ[[1]])
champ["Year"] = 1995
champ <- champ[c("Player", "Pos", "Ht", "Wt", "Year")]
champ <- readHTMLTable('rawdata/champion_stats1995.html')
champ <- as.data.frame(champ[[1]])
champ["Year"] = 1995
champ <- champ[c("Player", "Pos", "Ht", "Wt", "Year")]
for (i in 1996:2015) {
ch <- readHTMLTable(paste0('rawdata/champion_stats', i, '.html'))
ch <- as.data.frame(p[[1]])
ch["year"] = i
ch <- ch[c("Player", "Pos", "Ht", "Wt", "Year")]
champ <- rbind(champ, ch)
}
champ <- readHTMLTable('rawdata/champion_stats1995.html')
champ <- as.data.frame(champ[[1]])
champ["Year"] = 1995
champ <- champ[c("Player", "Pos", "Ht", "Wt", "Year")]
for (i in 1996:2015) {
ch <- readHTMLTable(paste0('rawdata/champion_stats', i, '.html'))
ch <- as.data.frame(ch[[1]])
ch["year"] = i
ch <- ch[c("Player", "Pos", "Ht", "Wt", "Year")]
champ <- rbind(champ, ch)
}
champ <- readHTMLTable('rawdata/champion_stats1995.html')
champ <- as.data.frame(champ[[1]])
champ["Year"] = 1995
champ <- champ[c("Player", "Pos", "Ht", "Wt", "Year")]
for (i in 1996:2015) {
ch <- readHTMLTable(paste0('rawdata/champion_stats', i, '.html'))
ch <- as.data.frame(ch[[1]])
ch["Year"] = i
ch <- ch[c("Player", "Pos", "Ht", "Wt", "Year")]
champ <- rbind(champ, ch)
}
champ["Ht"] <- unlist(lapply(champ["Ht"][[1]], to_inches))
to_inches <- function(height) {
h <- strsplit(as.character(height), "[^0-9]")
ft <- as.numeric(h[[1]][1])
inch <- as.numeric(h[[1]][2])
return(ft * 12 + inch)
}
champ["Ht"] <- unlist(lapply(champ["Ht"][[1]], to_inches))
write.csv(champ, file = "data/roster.csv")
library(XML)
# Data Cleaning for Champions.html
nba_champions <- readHTMLTable('rawdata/Champions.html')
nba_champions <- as.data.frame(nba_champions[[2]])
nba_champions[] <- lapply(nba_champions, as.character)
colnames(nba_champions) <- c('Year', 'Champion', 'Score', 'Opponent')
nba_champions <- nba_champions[-1, ]
write.csv(nba_champions, 'data/Champions.csv')
# Getting the statistics for the champions
champion_stats <- c()
nba_champions$Champion[nba_champions$Year==1995]
for (i in 1:21) {
file.path <- paste0('data/leagues_NBA_', 1994 + i, '_team.csv')
files <- read.csv(file.path)
champion_stats[[i]] <-
files[c("Team", "FGA", "FGP", "X3PA", "X3PP", "years")]
}
for (i in 1:21){
years <- 1994 + i
champion <- nba_champions$Champion[nba_champions$Year==years]
year_data <- champion_stats[[i]]
year_data$Team <- gsub('\\*', '', as.character(year_data$Team))
champion_stats[[i]] <-
year_data[year_data$Team == champion | year_data$Team == "Average", ]
}
all_champs <- do.call(rbind, champion_stats)
all_champs <- all_champs[-seq(from = 2, to = nrow(all_champs), by = 2L), ]
write.csv(all_champs, file = "data/champ_data.csv")
# Drafted Players' Heights
players <- readHTMLTable('rawdata/player_heights1995.html')
players <- as.data.frame(players[[9]])
players["year"] = 1995
players <- players[c("Name", "Height", "Weight", "year")]
for (i in 1996:2015) {
p <- readHTMLTable(paste0('rawdata/player_heights', i, '.html'))
p <- as.data.frame(p[[9]])
p["year"] = i
p <- p[c("Name", "Height", "Weight", "year")]
players <- rbind(players, p)
}
to_inches <- function(height) {
h <- strsplit(as.character(height), "[^0-9]")
ft <- as.numeric(h[[1]][1])
inch <- as.numeric(h[[1]][2])
return(ft * 12 + inch)
}
players["Height"] <- unlist(lapply(players["Height"][[1]], to_inches))
write.csv(players, file = "data/players.csv")
# Cleaning data for champion rosters
champ <- readHTMLTable('rawdata/champion_stats1995.html')
champ <- as.data.frame(champ[[1]])
champ["Year"] = 1995
champ <- champ[c("Player", "Pos", "Ht", "Wt", "Year")]
for (i in 1996:2015) {
ch <- readHTMLTable(paste0('rawdata/champion_stats', i, '.html'))
ch <- as.data.frame(ch[[1]])
ch["Year"] = i
ch <- ch[c("Player", "Pos", "Ht", "Wt", "Year")]
champ <- rbind(champ, ch)
}
champ["Ht"] <- unlist(lapply(champ["Ht"][[1]], to_inches))
write.csv(champ, file = "data/roster.csv")
## File for Initializing Project ##
# Initialize subdirectories
dir.create("code")
dir.create("data")
dir.create("images")
dir.create("rawdata")
dir.create("report")
dir.create("resources")
# Download data for champions
url.champs <-
'https://www.ticketcity.com/nba/nba-finals-tickets/nba-finals-champions.html'
download.file(url.champs, "rawdata/Champions.html")
# Download data for drafted player heights
for (i in 1995:2015) {
url_p_height <-
paste0('http://www.draftexpress.com/nba-draft-history/?syear=', i)
download.file(url_p_height, paste0('rawdata/player_heights', i, '.html'))
}
# Download data for champions' season stats
for (i in 1996:2015) {
url_championship_stats <-
paste0('http://www.basketball-reference.com/leagues/NBA_', i, '.html')
download.file(url_championship_stats, paste0('rawdata/championship_stats', i, '.html'))
}
# Download data for Case Study Players
# Download data for Championship team lineups
url_champ_stats <- 'http://www.basketball-reference.com/teams/HOU/1995.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 1995, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/CHI/1996.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 1996, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/CHI/1997.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 1997, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/CHI/1998.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 1998, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/SAS/1999.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 1999, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/LAL/2000.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2000, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/LAL/2001.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2001, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/LAL/2002.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2002, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/SAS/2003.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2003, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/DET/2004.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2004, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/SAS/2005.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2005, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/MIA/2006.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2006, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/SAS/2007.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2007, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/BOS/2008.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2008, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/LAL/2009.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2009, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/LAL/2010.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2010, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/DAL/2011.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2011, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/MIA/2012.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2012, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/MIA/2013.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2013, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/SAS/2014.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2014, '.html'))
url_champ_stats <- 'http://www.basketball-reference.com/teams/GSW/2015.html'
download.file(url_champ_stats, paste0('rawdata/champion_stats', 2015, '.html'))
View(players)
?mean
to_inches <- function(height) {
h <- strsplit(as.character(height), "[^0-9]")
ft <- as.numeric(h[[1]][1])
inch <- as.numeric(h[[1]][2])
return(ft * 12 + inch)
}
players <- readHTMLTable('rawdata/player_heights1995.html')
players <- as.data.frame(players[[9]])
players["Height"] <- unlist(lapply(players["Height"][[1]], to_inches))
players["Year"] = 1995
players["Average Height"] = mean(players["Height"])
players["Average Weight"] = mean(players["Weight"])
players <- players[c("Name", "Height", "Weight",
"Average Height", "Average Weight", "Year")]
for (i in 1996:2015) {
p <- readHTMLTable(paste0('rawdata/player_heights', i, '.html'))
p <- as.data.frame(p[[9]])
p["Height"] <- unlist(lapply(p["Height"][[1]], to_inches))
p["Year"] = i
p["Average Height"] = mean(p["Height"])
p["Average Weight"] = mean(p["Weight"])
p <- p[c("Name", "Height", "Weight",
"Average Height", "Average Weight", "Year")]
players <- rbind(players, p)
}
warnings()
players["Height"]
typeof(players["Height"])
class(players["Height"])
colMeans(players["Height"])
mean(players$Height)
players["Height"][1]
players["Height"][[1]]
mean(players["Height"][[1]])
typeof(players["Height"][[1]])
class(players["Height"][[1]])
mean(players["Height"][[1]])
class(players["Weight"][[1]])
typeof(players["Weight"][[1]])
mean(players["Weight"][[1]])
players["Height"]
?typeof
typeof(players["Height"])
class(players["Height"])
?class
class(players["Height"][1])
class(players["Height"][[1]])
players["Height"][[1]]
mean(players["Height"][[1]])
list(1, 2, 3)
typeof(players["Height"][[1]])
mean(list(1, 2, 3))
class(players["Height"][[1]])
typeof(players["Height"][[1]])
?mean
mean(unlist(players["Height"]))
mean(unlist(players["Height"])[[1]])
mean(unlist(players["Height"][[1]]))
mean(unlist(players["Height"])[[1]])
unlist(players["Height"])
unlist(players["Height"])[[1]]
unlist(players["Height"])
players["Height"]
unlist(players["Height"])
unlist(players["Height"])[1]
unlist(players["Height"])[2]
mean(unlist(players["Height"]))
class(unlist(players["Height"]))
mean(unlist(players["Height"]))
unlist(players["Height"])
mean(unlist(players["Height"]))
which.max(players[Height])
which.max(players["Height"])
which.max(players["Height"])
which.max(players["Height"][[1]])
players["Height"][[1]]
players["Height"]
which.max(players["Height"][[1]])
which.max(players["Height"])
which.max(players$Height)
which.max(players$Height)
players$Height
?mean
mean(players$Height, na.rm = TRUE)
players <- readHTMLTable('rawdata/player_heights1995.html')
players <- as.data.frame(players[[9]])
players["Height"] <- unlist(lapply(players["Height"][[1]], to_inches))
players["Year"] = 1995
players["Average Height"] = mean(players$Height, na.rm = TRUE)
players["Average Weight"] = mean(players$Weight, na.rm = TRUE)
players <- players[c("Name", "Height", "Weight",
"Average Height", "Average Weight", "Year")]
for (i in 1996:2015) {
p <- readHTMLTable(paste0('rawdata/player_heights', i, '.html'))
p <- as.data.frame(p[[9]])
p["Height"] <- unlist(lapply(p["Height"][[1]], to_inches))
p["Year"] = i
p["Average Height"] = mean(p$Height, na.rm = TRUE)
p["Average Weight"] = mean(p$Weight, na.rm = TRUE)
p <- p[c("Name", "Height", "Weight",
"Average Height", "Average Weight", "Year")]
players <- rbind(players, p)
}
warnings()
players <- readHTMLTable('rawdata/player_heights1995.html')
players <- as.data.frame(players[[9]])
players["Height"] <- unlist(lapply(players["Height"][[1]], to_inches))
players["Year"] = 1995
players["Average Height"] = mean(players$Height, na.rm = TRUE)
players["Average Weight"] = mean(as.numeric(players$Weight), na.rm = TRUE)
players <- players[c("Name", "Height", "Weight",
"Average Height", "Average Weight", "Year")]
for (i in 1996:2015) {
p <- readHTMLTable(paste0('rawdata/player_heights', i, '.html'))
p <- as.data.frame(p[[9]])
p["Height"] <- unlist(lapply(p["Height"][[1]], to_inches))
p["Year"] = i
p["Average Height"] = mean(p$Height, na.rm = TRUE)
p["Average Weight"] = mean(as.numeric(p$Weight), na.rm = TRUE)
p <- p[c("Name", "Height", "Weight",
"Average Height", "Average Weight", "Year")]
players <- rbind(players, p)
}
as.numeric(players$Weight)
players$Weight
players$Weight[1]
as.numeric(players$Weight[1])
typeof(players$Weight[1])
class(players$Weight[1])
mean(players$Weight)
drop.levels(players$Weight)
drop.levels(players)
as.numeric(levels(players$Weight))
mean(as.numeric(levels(players$Weight)), na.rm = TRUE)
players <- readHTMLTable('rawdata/player_heights1995.html')
players <- as.data.frame(players[[9]])
players["Height"] <- unlist(lapply(players["Height"][[1]], to_inches))
players["Year"] = 1995
players["Average Height"] = mean(players$Height, na.rm = TRUE)
players["Average Weight"] = mean(as.numeric(levels(players$Weight)), na.rm = TRUE)
players <- players[c("Name", "Height", "Weight",
"Average Height", "Average Weight", "Year")]
for (i in 1996:2015) {
p <- readHTMLTable(paste0('rawdata/player_heights', i, '.html'))
p <- as.data.frame(p[[9]])
p["Height"] <- unlist(lapply(p["Height"][[1]], to_inches))
p["Year"] = i
p["Average Height"] = mean(p$Height, na.rm = TRUE)
p["Average Weight"] = mean(as.numeric(levels(p$Weight)), na.rm = TRUE)
p <- p[c("Name", "Height", "Weight",
"Average Height", "Average Weight", "Year")]
players <- rbind(players, p)
}
write.csv(players, file = "data/players.csv")
champ <- readHTMLTable('rawdata/champion_stats1995.html')
champ <- as.data.frame(champ[[1]])
champ["Ht"] <- unlist(lapply(champ["Ht"][[1]], to_inches))
champ["Year"] = 1995
champ["Average Height"] = mean(champ$Height, na.rm = TRUE)
champ["Average Weight"] = mean(as.numeric(levels(champ$Weight)), na.rm = TRUE)
champ <- champ[c("Player", "Pos", "Ht", "Wt", "Average Height", "Average Weight", "Year")]
for (i in 1996:2015) {
ch <- readHTMLTable(paste0('rawdata/champion_stats', i, '.html'))
ch <- as.data.frame(ch[[1]])
ch["Year"] = i
ch["Average Height"] = mean(ch$Height, na.rm = TRUE)
ch["Average Weight"] = mean(as.numeric(levels(ch$Weight)), na.rm = TRUE)
ch <- ch[c("Player", "Pos", "Ht", "Wt", "Average Height", "Average Weight", "Year")]
champ <- rbind(champ, ch)
}
View(champ)
warnings()
mean(champ$Height, na.rm = TRUE)
typeof(champ$Height)
class(champ$Height)
# Cleaning data for champion rosters
champ <- readHTMLTable('rawdata/champion_stats1995.html')
champ <- as.data.frame(champ[[1]])
champ["Ht"] <- unlist(lapply(champ["Ht"][[1]], to_inches))
champ["Year"] = 1995
champ["Average Height"] = mean(champ$Ht, na.rm = TRUE)
champ["Average Weight"] = mean(as.numeric(levels(champ$Wt)), na.rm = TRUE)
champ <- champ[c("Player", "Pos", "Ht", "Wt", "Average Height", "Average Weight", "Year")]
for (i in 1996:2015) {
ch <- readHTMLTable(paste0('rawdata/champion_stats', i, '.html'))
ch <- as.data.frame(ch[[1]])
ch["Year"] = i
ch["Average Height"] = mean(ch$Ht, na.rm = TRUE)
ch["Average Weight"] = mean(as.numeric(levels(ch$Wt)), na.rm = TRUE)
ch <- ch[c("Player", "Pos", "Ht", "Wt", "Average Height", "Average Weight", "Year")]
champ <- rbind(champ, ch)
}
warnings()
champ <- readHTMLTable('rawdata/champion_stats1995.html')
champ <- as.data.frame(champ[[1]])
champ["Ht"] <- unlist(lapply(champ["Ht"][[1]], to_inches))
champ["Year"] = 1995
champ["Average Height"] = mean(champ$Ht, na.rm = TRUE)
champ["Average Weight"] = mean(as.numeric(levels(champ$Wt)), na.rm = TRUE)
champ <- champ[c("Player", "Pos", "Ht", "Wt", "Average Height", "Average Weight", "Year")]
for (i in 1996:2015) {
ch <- readHTMLTable(paste0('rawdata/champion_stats', i, '.html'))
ch <- as.data.frame(ch[[1]])
ch["Ht"] <- unlist(lapply(ch["Ht"][[1]], to_inches))
ch["Year"] = i
ch["Average Height"] = mean(ch$Ht, na.rm = TRUE)
ch["Average Weight"] = mean(as.numeric(levels(ch$Wt)), na.rm = TRUE)
ch <- ch[c("Player", "Pos", "Ht", "Wt", "Average Height", "Average Weight", "Year")]
champ <- rbind(champ, ch)
}
write.csv(champ, file = "data/roster.csv")
