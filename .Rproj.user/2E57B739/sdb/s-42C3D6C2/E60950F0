{
    "contents" : "library(XML)\n\n# Data Cleaning for Champions.html\nnba_champions <- readHTMLTable('rawdata/Champions.html')\nnba_champions <- as.data.frame(nba_champions[[2]])\nnba_champions[] <- lapply(nba_champions, as.character)\ncolnames(nba_champions) <- c('Year', 'Champion', 'Score', 'Opponent')\nnba_champions <- nba_champions[-1, ]\nwrite.csv(nba_champions, 'data/Champions.csv')\n\n# Getting the statistics for the champions\nchampion_stats <- c()\nnba_champions$Champion[nba_champions$Year==1995]\nfor (i in 1:21) {\n  file.path <- paste0('data/leagues_NBA_', 1994 + i, '_team.csv')\n  files <- read.csv(file.path)\n  champion_stats[[i]] <- \n    files[c(\"Team\", \"FGA\", \"FGP\", \"X3PA\", \"X3PP\", \"years\")]\n}\nfor (i in 1:21){\n  years <- 1994 + i\n  champion <- nba_champions$Champion[nba_champions$Year==years]\n  year_data <- champion_stats[[i]]\n  year_data$Team <- gsub('\\\\*', '', as.character(year_data$Team))\n  champion_stats[[i]] <- \n    year_data[year_data$Team == champion | year_data$Team == \"Average\", ]\n}\nall_champs <- do.call(rbind, champion_stats)\nall_champs <- all_champs[-seq(from = 2, to = nrow(all_champs), by = 2L), ]\nwrite.csv(all_champs, file = \"data/champ_data.csv\")\n\n# Drafted Players' Heights\nto_inches <- function(height) {\n  h <- strsplit(as.character(height), \"[^0-9]\")\n  ft <- as.numeric(h[[1]][1])\n  inch <- as.numeric(h[[1]][2])\n  return(ft * 12 + inch)\n}\n\nplayers <- readHTMLTable('rawdata/player_heights1995.html')\nplayers <- as.data.frame(players[[9]])\nplayers[\"Height\"] <- unlist(lapply(players[\"Height\"][[1]], to_inches))\nplayers[\"Year\"] = 1995\nplayers[\"Average Height\"] = mean(players$Height, na.rm = TRUE)\nplayers[\"Average Weight\"] = mean(as.numeric(levels(players$Weight)), na.rm = TRUE)\nplayers <- players[c(\"Name\", \"Height\", \"Weight\", \n                     \"Average Height\", \"Average Weight\", \"Year\")]\n\nfor (i in 1996:2015) {\n  p <- readHTMLTable(paste0('rawdata/player_heights', i, '.html'))\n  p <- as.data.frame(p[[9]])\n  p[\"Height\"] <- unlist(lapply(p[\"Height\"][[1]], to_inches))\n  p[\"Year\"] = i\n  p[\"Average Height\"] = mean(p$Height, na.rm = TRUE)\n  p[\"Average Weight\"] = mean(as.numeric(levels(p$Weight)), na.rm = TRUE)\n  p <- p[c(\"Name\", \"Height\", \"Weight\", \n           \"Average Height\", \"Average Weight\", \"Year\")]\n  players <- rbind(players, p)\n}\n\nwrite.csv(players, file = \"data/players.csv\")\n\n# Cleaning data for champion rosters\nchamp <- readHTMLTable('rawdata/champion_stats1995.html')\nchamp <- as.data.frame(champ[[1]])\nchamp[\"Ht\"] <- unlist(lapply(champ[\"Ht\"][[1]], to_inches))\nchamp[\"Year\"] = 1995\nchamp[\"Average Height\"] = mean(champ$Ht, na.rm = TRUE)\nchamp[\"Average Weight\"] = mean(as.numeric(levels(champ$Wt)), na.rm = TRUE)\nchamp <- champ[c(\"Player\", \"Pos\", \"Ht\", \"Wt\", \"Average Height\", \"Average Weight\", \"Year\")]\n\nfor (i in 1996:2015) {\n  ch <- readHTMLTable(paste0('rawdata/champion_stats', i, '.html'))\n  ch <- as.data.frame(ch[[1]])\n  ch[\"Ht\"] <- unlist(lapply(ch[\"Ht\"][[1]], to_inches))\n  ch[\"Year\"] = i\n  ch[\"Average Height\"] = mean(ch$Ht, na.rm = TRUE)\n  ch[\"Average Weight\"] = mean(as.numeric(levels(ch$Wt)), na.rm = TRUE)\n  ch <- ch[c(\"Player\", \"Pos\", \"Ht\", \"Wt\", \"Average Height\", \"Average Weight\", \"Year\")]\n  champ <- rbind(champ, ch)\n}\nwrite.csv(champ, file = \"data/roster.csv\")\n\n# Case Study Player: Stephen Curry\nsteph_curry <- readHTMLTable('rawdata/steph_curry.html')\nsteph_curry <- as.data.frame(steph_curry[[11]])\nwrite.csv(steph_curry, 'data/steph_curry.csv')\n\nsteph_curry_stats <- readHTMLTable('rawdata/steph_curry_career.html')\nsteph_curry_stats <- steph_curry_stats$per_game\nwrite.csv(steph_curry_stats, 'data/steph_curry_stats.csv')\n\n# Case Study Player: Draymond Green\ndraymond_green <- readHTMLTable('rawdata/draymond_green.html')\ndraymond_green <- as.data.frame(draymond_green[[11]])\nwrite.csv(draymond_green, 'data/draymond_green.csv')\n\ndraymond_green_stats <- readHTMLTable('rawdata/draymond_green.html')\ndraymond_green_stats <- as.data.frame(draymond_green_stats[[12]])\nwrite.csv(draymond_green_stats, 'data/draymond_green_stats.csv')\n\n# Case Study Player: Tim Duncan\ntim_duncan <- readHTMLTable('rawdata/tim_duncan.html')\ntim_duncan <- as.data.frame(tim_duncan[[11]])\nwrite.csv(tim_duncan, 'data/tim_duncan.csv')\n\ntim_duncan_stats <- readHTMLTable('rawdata/tim_duncan.html')\ntim_duncan_stats <- as.data.frame(tim_duncan_stats[[12]])\nwrite.csv(tim_duncan_stats, 'data/tim_duncan_stats.csv')\n\n# Case Study Player: Shaq\nshaq <- readHTMLTable('rawdata/shaq.html')\nshaq <- as.data.frame(shaq[[11]])\nwrite.csv(shaq, 'data/shaq.csv')\n\nshaq_stats <- readHTMLTable('rawdata/shaq.html')\nshaq_stats <- as.data.frame(shaq_stats[[12]])\nwrite.csv(shaq_stats, 'data/shaq_stats.csv')\n",
    "created" : 1449875259378.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1549296771",
    "id" : "E60950F0",
    "lastKnownWriteTime" : 1449955518,
    "path" : "~/Stat133Project/code/Data Cleaning and Preparation.R",
    "project_path" : "code/Data Cleaning and Preparation.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "type" : "r_source"
}